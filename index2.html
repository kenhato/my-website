<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple Music 中継ページ</title>

    <!-- OGPタグを動的に設定 -->
    <script>
        // URLパラメータを取得してOGPタグを動的に生成
        function setOGPTags() {
            const params = new URLSearchParams(window.location.search);
            const musicUrl = params.get("musicUrl");

            if (!musicUrl || !musicUrl.includes("music.apple.com")) {
                document.body.innerHTML = "<h1>無効なURLです</h1>";
                return;
            }

            // 動的にOGPタグを設定
            const head = document.head;

            // OGPタイトル（固定でもOK）
            const ogTitle = document.createElement("meta");
            ogTitle.setAttribute("property", "og:title");
            ogTitle.setAttribute("content", "おすすめの曲をチェック！");
            head.appendChild(ogTitle);

            // OGP説明文
            const ogDescription = document.createElement("meta");
            ogDescription.setAttribute("property", "og:description");
            ogDescription.setAttribute("content", "Apple Musicでこの曲を聴いてみよう！");
            head.appendChild(ogDescription);

            // OGP画像（固定画像も可）
            const ogImage = document.createElement("meta");
            ogImage.setAttribute("property", "og:image");
            ogImage.setAttribute("content", "https://is5-ssl.mzstatic.com/image/thumb/Music2/v4/8f/b9/94/8fb9940b-f1b4-b61e-0214-e1699c74be7e/00602547275595.rgb.jpg");
            head.appendChild(ogImage);

            // OGP URL
            const ogUrl = document.createElement("meta");
            ogUrl.setAttribute("property", "og:url");
            ogUrl.setAttribute("content", musicUrl);
            head.appendChild(ogUrl);
        }

        // ページが読み込まれたときに実行
        document.addEventListener("DOMContentLoaded", setOGPTags);
    </script>
</head>
<body>
    <div style="text-align: center; padding: 20px;">
        <h1>この曲を聴いてみて！</h1>
        <p>以下のリンクをクリックしてApple Musicで楽しもう！</p>
        <a id="musicLink" href="#" target="_blank" style="font-size: 18px; color: blue;">Apple Musicで聴く</a>
    </div>

    <script>
        // URLパラメータからリンクを設定
        const params = new URLSearchParams(window.location.search);
        const musicUrl = params.get("musicUrl");
        const musicLink = document.getElementById("musicLink");

        if (musicUrl && musicLink) {
            musicLink.href = musicUrl;
        } else {
            document.body.innerHTML = "<h1>無効なURLです</h1>";
        }
    </script>
</body>
</html>

