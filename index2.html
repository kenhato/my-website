<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple Music ä¸­ç¶™ãƒšãƒ¼ã‚¸</title>

    <!-- Twitterã‚«ãƒ¼ãƒ‰ç”¨ã®OGPã‚¿ã‚°ã‚’å‹•çš„ã«è¨­å®š -->
    <script>
        function setOGPTags() {
            const params = new URLSearchParams(window.location.search);
            const musicUrl = params.get("musicUrl");

            // ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ­ã‚°
            console.log("å—ã‘å–ã£ãŸURL:", musicUrl);

            // URLãŒä¸æ­£ãªå ´åˆã®ã‚¨ãƒ©ãƒ¼å‡¦ç†
            if (!musicUrl || !musicUrl.includes("music.apple.com")) {
                document.body.innerHTML = "<h1>ç„¡åŠ¹ãªURLã§ã™</h1>";
                return;
            }

            const head = document.head;

            // OGPã‚¿ã‚°ã‚’å‹•çš„ã«è¿½åŠ 
            const ogTitle = document.createElement("meta");
            ogTitle.setAttribute("property", "og:title");
            ogTitle.setAttribute("content", "Apple Musicã§ãŠã™ã™ã‚ã®æ›²ã‚’ãƒã‚§ãƒƒã‚¯ï¼");
            head.appendChild(ogTitle);

            const ogDescription = document.createElement("meta");
            ogDescription.setAttribute("property", "og:description");
            ogDescription.setAttribute("content", "ä»Šã™ãã“ã®æ›²ã‚’è´ã„ã¦ã¿ã‚ˆã†ï¼ ğŸ¶");
            head.appendChild(ogDescription);

            const ogImage = document.createElement("meta");
            ogImage.setAttribute("property", "og:image");
            ogImage.setAttribute("content", "https://is5-ssl.mzstatic.com/image/thumb/Music2/v4/8f/b9/94/8fb9940b-f1b4-b61e-0214-e1699c74be7e/00602547275595.rgb.jpg");
            head.appendChild(ogImage);

            const ogUrl = document.createElement("meta");
            ogUrl.setAttribute("property", "og:url");
            ogUrl.setAttribute("content", musicUrl);
            head.appendChild(ogUrl);
        }

        document.addEventListener("DOMContentLoaded", setOGPTags);

        function tweetThisPage() {
            const currentUrl = window.location.href;
            const tweetContent = `ã“ã®æ›²ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã­ï¼ ğŸµ\n${currentUrl}`;
            const tweetUrlWeb = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetContent)}`;

            // ãƒ„ã‚¤ãƒ¼ãƒˆç”»é¢ã‚’é–‹ã
            window.open(tweetUrlWeb, '_blank');
        }
    </script>
</head>
<body>
    <h1>Apple Musicã§ã“ã®æ›²ã‚’è´ã“ã†ï¼</h1>
    <p>ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦Apple Musicã§å†ç”Ÿã§ãã¾ã™ã€‚</p>
    <a id="musicLink" href="#" target="_blank" style="color: blue; text-decoration: underline;">Apple Musicã§å†ç”Ÿ</a>
    <br><br>
    <!-- ãƒ„ã‚¤ãƒ¼ãƒˆã™ã‚‹ãƒœã‚¿ãƒ³ -->
    <button onclick="tweetThisPage()" style="padding: 10px 20px; font-size: 16px; background-color: #1DA1F2; color: white; border: none; border-radius: 5px; cursor: pointer;">
        ãƒ„ã‚¤ãƒ¼ãƒˆã™ã‚‹
    </button>

    <script>
        const params = new URLSearchParams(window.location.search);
        const musicUrl = params.get("musicUrl");
        const musicLink = document.getElementById("musicLink");

        if (musicUrl) {
            musicLink.href = musicUrl;
        } else {
            console.error("URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚");
        }
    </script>
</body>
</html>
